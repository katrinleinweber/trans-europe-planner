<!DOCTYPE html>
<html lang="de">

<head>
    <meta name="description" content="Ohne Flugzeug quer durch Europa"/>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- maplibre -->
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@4.6.0/dist/maplibre-gl.css"/>
    <script src="https://unpkg.com/maplibre-gl@4.6.0/dist/maplibre-gl.js"></script>

    <!-- styles -->
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/calender.css">

    <!-- scripts -->
    <script src="script/calender.js"></script>
    <script src="script/map.js"></script>
    <script src="script/util.js"></script>

    <title>Trans-Europe-Planner</title>

</head>

<body>

<div id="map"></div>
<div id="calendar">

    <!-- hourly grid as background -->
    <div id="hourly-grid">
        <template id="template-hourly-grid">
            <div class="label"></div>
        </template>
    </div>

    <!-- fine-grained grid to display train connections-->
    <div id="connection-grid">
        <template id="template-connection-grid">
            <div class="label" draggable="true"></div>
        </template>
    </div>

</div>


<script>
    const map = new maplibregl.Map({
      container: 'map',
      style: "style/outdoors-modified.json",
      center: [13.408333, 52.518611],
      zoom: 4
    });

    map.on('load', () => initMap(map));

    const hourlyGrid = document.getElementById("hourly-grid");
    initHourlyGrid(hourlyGrid);

    const connections = [
        {
            start: 8.5,
            end: 13,
            title: 'Berlin -> München'
        },
        {
            start: 13.5,
            end: 19,
            title: 'München -> Innsbruck',
        }
    ];


    const connectionGrid = document.getElementById("connection-grid");
    displayConnections(connectionGrid, connections);

    /*connectionGrid.addEventListener("dragstart", e => {
        console.log("start");
        e.dataTransfer.dropEffect = "move";
        e.dataTransfer.setData("connectionId", e.target.id);
    });

    connectionGrid.addEventListener("drop", e => {
        e.preventDefault();
        console.log("drop");
        const connectionId = e.dataTransfer.getData("connectionId");
        const connectionDiv = document.getElementById(connectionId);

        console.log(`${connectionDiv.style.gridRowStart}->${window.getComputedStyle(connectionDiv).gridRowStart}`);
        console.log(window.getComputedStyle(connectionDiv));
    });

    connectionGrid.addEventListener("dragover", e => {
        e.preventDefault();
    });*/



</script>

</body>
</html>
